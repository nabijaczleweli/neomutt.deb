From ba35c1e87c573376bcaf4675b9ee200749d5e8c9 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?=D0=BD=D0=B0=D0=B1?= <nabijaczleweli@gmail.com>
Date: Sat, 9 May 2020 15:17:42 +0200
Subject: [PATCH] fix ALL_FILES

This fixes vendoring and patches that remove files when building from
within a git repository

Based on an old version of https://github.com/neomutt/neomutt/pull/2326
---
 Makefile.autosetup | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/Makefile.autosetup b/Makefile.autosetup
index 34cc7160e..cab85a967 100644
--- a/Makefile.autosetup
+++ b/Makefile.autosetup
@@ -56,7 +56,7 @@ UNINSTALL_TARGETS=	@UNINSTALL_TARGETS@
 
 VPATH=		@VPATH@
 
-ALL_FILES!=	(cd $(SRCDIR) && git ls-files 2>/dev/null) || true
+ALL_FILES!=	(cd $(SRCDIR) && git ls-files | xargs realpath -e) 2>/dev/null || true 
 
 ###############################################################################
 # neomutt
-- 
2.20.1

