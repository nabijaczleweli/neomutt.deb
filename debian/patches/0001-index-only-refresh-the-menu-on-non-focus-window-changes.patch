From: =?utf-8?b?0L3QsNCx?= <nabijaczleweli@nabijaczleweli.xyz>
Date: Fri, 12 May 2023 16:15:10 +0200
Subject: index: only refresh the menu on non-focus window changes

Fixes: commit 968e302be1d2ac8d952b25bf4fced0d568e81e8e ("index: refresh
 the menu on window changes")
Closes: #3781
---
 index/index.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/index/index.c b/index/index.c
index e497469..c057060 100644
--- a/index/index.c
+++ b/index/index.c
@@ -500,7 +500,8 @@ static int index_window_observer(struct NotifyCallback *nc)
   struct Menu *menu = win->wdata;
   if (nc->event_subtype != NT_WINDOW_DELETE)
   {
-    menu_queue_redraw(menu, MENU_REDRAW_FULL | MENU_REDRAW_INDEX);
+    if (nc->event_subtype != NT_WINDOW_FOCUS)
+      menu_queue_redraw(menu, MENU_REDRAW_FULL | MENU_REDRAW_INDEX);
     return 0;
   }
 
